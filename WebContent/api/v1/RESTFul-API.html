<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>DNS RESTFul-API</title>
</head>
<body>
<a href="../../docs/index.html">home</a>
<h1>DNS RESTful API<h1>             
<h2>API</h2>
<p>The API gives access to the progress information for SIPs previously submitted to the DNS. 
Various kinds of SIP-Identification can be used to get the appropriate information.</p>
<h2>Service URL</h2>
<p>Contractors <em>must</em> use the Service URL of their associated Service Provider. 
Secure HTTP (https) is supported exclusively. Redirect from http to https depends on 
the Providers facilities. According to RFC-2616 all characters with special function 
in URL have to be encoded when using one of the services.</p> 
<h2>Authentification</h2>
<p>Contractors must authenticate with BASIC AUTH. Credentials are same as contractor's.</p>
<a href="https://server/daweb3/">https://server/daweb3/</a>
<h2>Services</h2>
<h3>Service "status/index"</h3>
<ul>
	<li>Service request: <a href="https://server/daweb3/status/index">/status/index</a></li>
	<li>Request method: GET</li>
	<li>Parameters:</li>
    <ul>
    	<li>identifier: the DNS internal identifier,</li>
    	<li>origName: the name of the object was submitted to the DNS,</li>
    	<li>urn: the urn generated by DNS,</li>
    	<li>containerName: the name of the SIP container submitted to the DNS</li>
    </ul>
	<li>Returns: JSON</li>
</ul>
<h3>Description</h3>
<p>Service returns information about the actual state of a SIP delivered to the DNS System.</p> 
<p>The SIP in request must be identified by one of the above defined parameters. It can be 
identified either with the DNS internal <em>identifier</em>, with the filename of the SIP as it 
was submitted into the system (<em>origName</em>) or the <em>urn</em> generated by DNS.</p>
<p>If using the origName Parameter, the original name provided with the Parameter should be 
the name, the item is listed in your own domain.The other Parameters (identifier and urn) are 
generated by DNS during the ingest process. Internal SIP name correlates with the name of the 
file submitted.</p>
<p>The JSON returned includes all types of information about the SIP submitted.</p> 
<ul>
	<li>DNS specific process status:<li> 
    <ul>
    	<li>archived if SIP was successfully processed,</li>
    	<li>package in progress error" if DNS is unable to process SIP. 
    	The DNS internal status code is added as embraced number</li> 
		<li>* all identifiers supported and/or generated by DNS</li>
		<li>Contractors identification</li>
	</ul>
</ul>
<h4>Example-Request</h4>
<code>curl -v -H "Accept: application/json" X GET -u hbzadmin --url "https://server/daweb3/status/index?urn=urn:nbn:de:hbz:X:1-12345"</code>
<h4>Example Response</h4>    
<code>{"result":
    [{"type":"Object","status":"archived","urn":"urn:nbn:de:hbz:6:1-31323","contractor":"hbzadmin","origName":"06-Apr-2016-T-15-10-01-urn+nbn+de+hbz+6+1-31323","identifier":"8-2016040610214","packages":["06-Apr-2016-T-15-10-01-urn+nbn+de+hbz+6+1-31323.zip"]}
    ]}
</code>
<h3>Service "automatedRetrieval/queueForRetrievalJSON"</h3>
<ul>
	<li>Service request: <a href="https://server/daweb3/automatedRetrieval/queueForRetrievalJSON">/automatedRetrieval/queueForRetrievalJSON</a></li>
	<li>Request method: GET</li>
	<li>Parameters:</li>
    <ul>
    	<li>identifier: the DNS internal identifier,</li>
    	<li>origName: the name of the object was submitted to the DNS,</li>
    	<li>urn: the urn generated by DNS,</li>
    	<li>containerName: the name of the SIP container submitted to the DNS</li>
    </ul>
	<li>Returns: JSON</li>
</ul>
<h3>Description</h3>
<p><span style="color:#f00;">Service returns ...</span></p> 
<p>The SIP in request must be identified by one of the above defined parameters. It can be 
identified either with the DNS internal <em>identifier</em>, with the filename of the SIP as it 
was submitted into the system (<em>origName</em>) or the <em>urn</em> generated by DNS.</p>
<p>If using the origName Parameter, the original name provided with the Parameter should be 
the name, the item is listed in your own domain.The other Parameters (identifier and urn) are 
generated by DNS during the ingest process. Internal SIP name correlates with the name of the 
file submitted.</p>
<h4>Example-Request</h4>
<code>...</code>
<h4>Example Response</h4>    
<code>...
</code>

<h2>Version</h2>
<ul>
	<li>RESTFul-API Version 1</li>
</ul>
<h2>Revision</h2>
<ul>
	<li>No changes to previous version</li>
</ul>
  
</body>
</html>